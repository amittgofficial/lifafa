<!DOCTYPE html>
<html>
<head>
  <title>Lifafa Viewer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { background: #111; color: #fff; font-family: sans-serif; padding: 20px; }
    .toast { background: #333; color: #fff; padding: 10px; border-radius: 5px; position: fixed; top: 10px; right: 10px; z-index: 99; }
  </style>
</head>
<body>
<h2>ğŸ Lifafa Preview</h2>
<div id="content">Loading...</div>

<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyC_cheD-4h3y_KJnPpk1W-dcl4RfszZNxY",
  authDomain: "lifafaxamit.firebaseapp.com",
  projectId: "lifafaxamit",
  storageBucket: "lifafaxamit.firebasestorage.app",
  messagingSenderId: "528812070935",
  appId: "1:528812070935:web:2eb06b0f65ce5995122452"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

function getQueryParam(param) {
  return new URLSearchParams(window.location.search).get(param);
}

function toast(msg) {
  let div = document.createElement("div");
  div.className = "toast";
  div.innerText = msg;
  document.body.appendChild(div);
  setTimeout(() => div.remove(), 3000);
}

const code = getQueryParam('code');
if (code) {
  db.collection("lifafas").doc(code).get().then(doc => {
    if (doc.exists) {
      const d = doc.data();
      document.getElementById("content").innerHTML = `
        <b>ğŸ“› Title:</b> ${d.title}<br>
        <b>ğŸ’° Amount:</b> â‚¹${d.amount}<br>
        <b>ğŸ“¦ Code:</b> ${d.code}<br><br>
        <b>ğŸ“ Numbers:</b><br>${d.numbers.join(', ')}
      `;
    } else {
      document.getElementById("content").innerText = "âŒ Lifafa not found.";
    }
  });
} else {
  document.getElementById("content").innerText = "â— Code not provided.";
}
</script>
</body>
</html>
